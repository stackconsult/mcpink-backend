---
# Cluster-specific K8s manifest location (resolved relative to inventory_dir)
k8s_manifest_src_dir: "{{ inventory_dir }}/../k8s"

# Shared cluster defaults
k3s_server_url: "https://{{ k3s_server_endpoint_ip }}:6443"
k3s_flannel_iface_default: enp7s0
k3s_extra_tls_sans: []
k3s_disable_default_registry_endpoint: true
k3s_server_disable_components:
  - traefik
  - servicelb

registry_mirror_endpoint: "http://{{ registry_ip }}:{{ registry_port }}"
registry_host_fqdn: "{{ registry_host_alias }}:{{ registry_port }}"

# Firewall defaults
firewall_block_smtp: true
firewall_block_metadata: true

# Helm CLI pin (reproducible controller bootstrap)
helm_cli_version: "3.16.4"
helm_cli_arch_map:
  x86_64: amd64
  aarch64: arm64
helm_cli_sha256:
  amd64: fc307327959aa38ed8f9f7e66d45492bb022a66c3e5da6063958254b9767d179
  arm64: d3f8f15b3d9ec8c8678fbf3280c3e5902efabe5912e2f9fcf29107efbc8ead69

# Helm chart versions (pin where practical)
traefik_chart_ref: traefik/traefik
cert_manager_chart_ref: jetstack/cert-manager
loki_chart_ref: grafana/loki
promtail_chart_ref: grafana/promtail
prometheus_chart_ref: prometheus-community/kube-prometheus-stack
grafana_chart_ref: grafana/grafana
traefik_chart_version: "39.0.0"
cert_manager_chart_version: "v1.19.3"
loki_chart_version: "6.53.0"
promtail_chart_version: "6.17.1"
prometheus_chart_version: "81.6.1"
grafana_chart_version: "10.5.15"

# Helm release names
traefik_release_name: traefik
cert_manager_release_name: cert-manager
loki_release_name: loki
promtail_release_name: promtail
prometheus_release_name: prometheus
grafana_release_name: grafana

# Cloudflare load balancer defaults (Cloudflare dashboard is current control surface)
cloudflare_lb_hostnames:
  - "*.{{ apps_domain }}"
  - "grafana.{{ apps_domain }}"
  - "loki.{{ apps_domain }}"
  - "prometheus.{{ apps_domain }}"
cloudflare_lb_monitor_path: /
cloudflare_lb_monitor_port: 443
cloudflare_lb_monitor_expected_codes: "200,301,302,401,403,404"
cloudflare_lb_monitor_interval: 60
cloudflare_lb_monitor_timeout: 5
