// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: dnsrecords.sql

package dnsrecords

import (
	"context"
)

const createDNSRecord = `-- name: CreateDNSRecord :one
INSERT INTO dns_records (service_id, cloudflare_record_id, subdomain, full_domain, target_ip)
VALUES ($1, $2, $3, $4, $5)
RETURNING id, service_id, cloudflare_record_id, subdomain, full_domain, target_ip, created_at
`

type CreateDNSRecordParams struct {
	ServiceID          *string `json:"service_id"`
	CloudflareRecordID string  `json:"cloudflare_record_id"`
	Subdomain          string  `json:"subdomain"`
	FullDomain         string  `json:"full_domain"`
	TargetIp           string  `json:"target_ip"`
}

func (q *Queries) CreateDNSRecord(ctx context.Context, arg CreateDNSRecordParams) (DnsRecord, error) {
	row := q.db.QueryRow(ctx, createDNSRecord,
		arg.ServiceID,
		arg.CloudflareRecordID,
		arg.Subdomain,
		arg.FullDomain,
		arg.TargetIp,
	)
	var i DnsRecord
	err := row.Scan(
		&i.ID,
		&i.ServiceID,
		&i.CloudflareRecordID,
		&i.Subdomain,
		&i.FullDomain,
		&i.TargetIp,
		&i.CreatedAt,
	)
	return i, err
}

const deleteDNSRecord = `-- name: DeleteDNSRecord :exec
DELETE FROM dns_records WHERE id = $1
`

func (q *Queries) DeleteDNSRecord(ctx context.Context, id string) error {
	_, err := q.db.Exec(ctx, deleteDNSRecord, id)
	return err
}

const deleteDNSRecordByServiceID = `-- name: DeleteDNSRecordByServiceID :exec
DELETE FROM dns_records WHERE service_id = $1
`

func (q *Queries) DeleteDNSRecordByServiceID(ctx context.Context, serviceID *string) error {
	_, err := q.db.Exec(ctx, deleteDNSRecordByServiceID, serviceID)
	return err
}

const getDNSRecordByCloudflareID = `-- name: GetDNSRecordByCloudflareID :one
SELECT id, service_id, cloudflare_record_id, subdomain, full_domain, target_ip, created_at FROM dns_records WHERE cloudflare_record_id = $1
`

func (q *Queries) GetDNSRecordByCloudflareID(ctx context.Context, cloudflareRecordID string) (DnsRecord, error) {
	row := q.db.QueryRow(ctx, getDNSRecordByCloudflareID, cloudflareRecordID)
	var i DnsRecord
	err := row.Scan(
		&i.ID,
		&i.ServiceID,
		&i.CloudflareRecordID,
		&i.Subdomain,
		&i.FullDomain,
		&i.TargetIp,
		&i.CreatedAt,
	)
	return i, err
}

const getDNSRecordByServiceID = `-- name: GetDNSRecordByServiceID :one
SELECT id, service_id, cloudflare_record_id, subdomain, full_domain, target_ip, created_at FROM dns_records WHERE service_id = $1
`

func (q *Queries) GetDNSRecordByServiceID(ctx context.Context, serviceID *string) (DnsRecord, error) {
	row := q.db.QueryRow(ctx, getDNSRecordByServiceID, serviceID)
	var i DnsRecord
	err := row.Scan(
		&i.ID,
		&i.ServiceID,
		&i.CloudflareRecordID,
		&i.Subdomain,
		&i.FullDomain,
		&i.TargetIp,
		&i.CreatedAt,
	)
	return i, err
}

const getDNSRecordBySubdomain = `-- name: GetDNSRecordBySubdomain :one
SELECT id, service_id, cloudflare_record_id, subdomain, full_domain, target_ip, created_at FROM dns_records WHERE subdomain = $1
`

func (q *Queries) GetDNSRecordBySubdomain(ctx context.Context, subdomain string) (DnsRecord, error) {
	row := q.db.QueryRow(ctx, getDNSRecordBySubdomain, subdomain)
	var i DnsRecord
	err := row.Scan(
		&i.ID,
		&i.ServiceID,
		&i.CloudflareRecordID,
		&i.Subdomain,
		&i.FullDomain,
		&i.TargetIp,
		&i.CreatedAt,
	)
	return i, err
}

const updateDNSRecordTarget = `-- name: UpdateDNSRecordTarget :one
UPDATE dns_records
SET target_ip = $2
WHERE id = $1
RETURNING id, service_id, cloudflare_record_id, subdomain, full_domain, target_ip, created_at
`

type UpdateDNSRecordTargetParams struct {
	ID       string `json:"id"`
	TargetIp string `json:"target_ip"`
}

func (q *Queries) UpdateDNSRecordTarget(ctx context.Context, arg UpdateDNSRecordTargetParams) (DnsRecord, error) {
	row := q.db.QueryRow(ctx, updateDNSRecordTarget, arg.ID, arg.TargetIp)
	var i DnsRecord
	err := row.Scan(
		&i.ID,
		&i.ServiceID,
		&i.CloudflareRecordID,
		&i.Subdomain,
		&i.FullDomain,
		&i.TargetIp,
		&i.CreatedAt,
	)
	return i, err
}
